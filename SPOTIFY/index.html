<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" type="text/css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <title>Spotify Clone</title>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-wraper">
            <div class="sidebar-logo">
                <img src="img/logo.png"/>
            </div> <!--Sidebar Logo -->

            <div class="sidebar-menu">
                <a class="sidebar-menu-selecionado" href="#"> <i class="fas fa-home"></i>Início</a>
                <a href="#"> <i class="fas fa-search"></i>Buscar</a>
                <a href="#"> <i class=" fas fa-database"></i>Biblioteca</a>
            </div> <!--Sidebar Menu-->

            <div class="sidebar-menu">
                <p class="sidebar-menu-title">Playlists</p> <!--Playlists-->

                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-componente">
                        +
                    </div>
                    <span>Criar uma Playlist</span>
                </div><!--Sidebar menu item-->

                <div class="sidebar-menu-item">
                    <img src="img/musicas_curtidas.png">
                    <span>Musicas Curtidas</span>
                </div><!--Sidebar menu item-->
            </div> <!--Sidebar Menu-->

            <div class="sidebar-playlists">
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
            </div> <!--Sidebar Playlists-->

            <div class="sidebar-playlists">
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
            </div> <!--Sidebar Playlists-->

            <div class="sidebar-playlists">
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
                <a href="">Playlist 1</a>
            </div> <!--Sidebar Playlists-->
        </div> <!--Sidebar Wraper-->
    </div> <!--Sidebar-->


    <!------------------------------------ Main ---------------------------------------->

    <div class="main">
        <div class="main-wraper">

            <div class="main-row">
                <div class="main-row-title"><h2>Paradas</h2></div> <!--Main row title-->

                <div class="main-col">
                    <img src="img/top50global.png">
                    <h3>As mais tocadas</h3>
                    <p>Descrição da música...</p>
                </div><!--Main col-->

                <div class="main-col">
                    <img src="img/top50global.png">
                    <h3>As mais tocadas</h3>
                    <p>Descrição da música...</p>
                </div><!--Main col-->

                <div class="main-col">
                    <img src="img/top50global.png">
                    <h3>As mais tocadas</h3>
                    <p>Descrição da música...</p>
                </div><!--Main col-->

                <div class="main-col">
                    <img src="img/top50global.png">
                    <h3>As mais tocadas</h3>
                    <p>Descrição da música...</p>
                </div><!--Main col-->

                <div class="main-col">
                    <img src="img/top50global.png">
                    <h3>As mais tocadas</h3>
                    <p>Descrição da música...</p>
                </div><!--Main col-->

                <div class="main-col">
                    <img src="img/top50global.png">
                    <h3>As mais tocadas</h3>
                    <p>Descrição da música...</p>
                </div><!--Main col-->

                <div class="main-row">
                    <div class="main-row-title"><h2>Minhas Músicas</h2></div> <!--Main row title-->
                        <div class="main-col" data-image="img/rocky.png" data-artist="Rocky Balboa" data-song="Eye of the tiger" data-file="assets/tiger.mp3">
                            <img src="img/rocky.png">
                            <h3>Rocky Balboa</h3>
                            <p>Eye of the tiger</p>
                        </div><!--Main col-->

                        <div class="main-col" data-image="img/gunsrools.png" data-artist="Guns N Roses" data-song="Sweet Child O Mine" data-file="assets/music.mp3">
                            <img src="img/gunsrools.png">
                            <h3>Guns N Roses</h3>
                            <p>Sweet Child O' Mine</p>
                        </div><!--Main col-->
                </div> <!--Main row-->
            </div> <!--Main row-->
        </div><!--Main wraper-->
    </div> <!--Main-->

    <div class="player">
        <div class="player-artist">

        </div> <!--Player artist-->

        <div class="player-control">
            <div class="player-control-buttons">
                <a href="#"><i class="fas fa-backward"></i></a>
                <a href="#" id="pauseBtn" style="display: none;"><i class="far fa-pause-circle"></i></a>
                <a href="#" id="playBtn"><i class="far fa-play-circle"></i></a>
                <a href="#"><i class="fas fa-forward"></i></a>
            </div> <!--Player buttons-->

            <div class="player-control-progress">
                <div class="player-control-progress-2"></div> <!--O width serve pra representar a porcentagem do video-->
            </div>

        </div> <!--Player control-->
    </div> <!--Player-->

    <script src="js/all.min.js"></script>
    <script src="js/jquery.js"></script>

    <audio id="audioplayer" style="position: absolute; left: 0; top: 0; z-index: -999; opacity: 0;" controls="">
    </audio>

    <script>
        var audioplayer = document.getElementById('audioplayer');
        var loaded = false;
        var playBtn = document.getElementById('playBtn');
        var pauseBtn = document.getElementById('pauseBtn');

       pauseBtn.addEventListener('click', (e)=>{
            e.preventDefault();

            playBtn.style.display = "inline";
            pauseBtn.style.display = "none";
            audioplayer.pause();
            return false;
        });

        playBtn.addEventListener('click', (e)=>{
            e.preventDefault();

            playBtn.style.display = "none";
            pauseBtn.style.display = "inline";
            audioplayer.play();
            return false;
        });

        const playSong = (file) => {
            if(loaded == false){
                audioplayer.innerHTML = `<source src="`+file+`" type="audio/mp3"></source>`;
                loaded = true;
            }
            
            audioplayer.play();

            playBtn.style.display = "none";
            pauseBtn.style.display = "inline";
        }

        document.querySelectorAll('.main-col').forEach(item =>{
            item.addEventListener('click', event=>{
                let image = item.getAttribute('data-image');
                let artist = item.getAttribute('data-artist');
                let song = item.getAttribute('data-song');
                let file = item.getAttribute('data-file');

                let playerArtistComponent = document.getElementsByClassName('player-artist');

                playerArtistComponent[0].innerHTML = `
                    <img src="`+image+`" />
                    <h3>`+artist+`<br/><span>`+song+`</span></h3>
                `;

                playSong(file);

            })
        });

        audioplayer.addEventListener("timeupdate", function() { // serve para atualizar a duração atual da musica
            var currentTime = audioplayer.currentTime;
            var duration = audioplayer.duration;
            $('.player-control-progress-2').stop(true,true).animate({'width':(currentTime +.25)/duration*100+'%'},250,'linear');
        });


    </script>

</body>
</html>